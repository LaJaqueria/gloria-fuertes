{"config":{"lang":["es"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Proyecto","text":"<p>Homenaje a Gloria Fuertes desde La Jaqueria</p> <p>TODO:</p>"},{"location":"about/","title":"Quienes somos","text":"<p>La Jaqueria es un grupo interdisciplinar de personas...</p> <p>TODO:</p>"},{"location":"electronica/","title":"Eletr\u00f3nica","text":"<ul> <li>Tiras de LEDs de 20m -&gt; link</li> <li>Placas ESP32 C3 Super Mini  + Shield expansion board -&gt; link</li> </ul>"},{"location":"electronica/#leds-alimentacion","title":"LEDs - Alimentaci\u00f3n","text":"<ul> <li>Se han pedido 4 tiras de leds de 20m -&gt; 80m de tiras</li> <li>Cada metro de tira contiene 10 leds -&gt; 1 led cada 10cm</li> <li>Cada led consume 0.1 - 0.3 W</li> <li>Cada 1m leds === 1 - 3 W</li> <li>Tira de 20m leds === 20 - 60 W</li> <li>Las tiras se pueden cortar y empalmar a nuestro antojo</li> </ul> <p>Para calcular la potencia tambi\u00e9n WLED nos provee de un recursos para eso</p> <ul> <li>Calculador de potencia para los leds con WLED =&gt; link</li> </ul>"},{"location":"electronica/#placas-esp32-c3-super-mini","title":"Placas ESP32 C3 Super Mini","text":"<p>Usamos las placas ESP32 C3 Super Mini porque son bastante peque\u00f1as, tienen todas las ventajas de las placas ESP32 (WiFi, Bluetooth, etc) y adem\u00e1s tienen USB-C.</p>"},{"location":"electronica/#flashear-placas-con-wled","title":"Flashear placas con WLED","text":"<p>Para poder usar estas placas primero hay que flashearlas con el software WLED</p> <ol> <li>Conecta la placa a tu ordenador con un cable USB-C</li> <li>Abre Google Chrome (no vale otro navegador)</li> <li>Entra en la web https://install.wled.me/</li> <li>Selecciona la versi\u00f3n del firmware a cargar</li> <li>Seleccion \"Plain\" y luego dale a \"Install\"</li> <li>Deber\u00e1s elegir el puerto USB donde est\u00e1 conectada la placa</li> <li>Configurale el WiFi y demas</li> <li>Luego te dir\u00e1 en que IP est\u00e1, entra en ella, vete a \"Config\" y termina de configurar toda la parte de red.</li> </ol>"},{"location":"materiales/","title":"Material","text":"<ul> <li>Tiras de LEDs de 20m -&gt; link</li> <li>Placas ESP32 C3 Super Mini  + Shield expansion board -&gt; link</li> <li>Estructura de madera</li> <li>Telas</li> <li>...</li> </ul>"},{"location":"software/","title":"Software","text":"<p>Libreria para usar los leds, WLED -&gt; link</p>"},{"location":"software/#como-empezar","title":"Como empezar","text":"<p>Primero deber\u00e1s tener las placas ESP32 C3 flasheadas -&gt; mira aqu\u00ed</p> <p>En este repositorio tienes una carpeta <code>src</code> que contiene un programa Node-Red dockerizado para poder levantar el programa.</p>"},{"location":"software/#interactuar-con-los-leds","title":"Interactuar con los LEDS","text":"<p>Se recomienda entrar en la pagina web del propio cacharro y fijar en la config la parte t\u00e9cnica de:</p> <ul> <li>Wifi, ip statica, etc</li> <li>Modelos de Leds usados, potencia, rgb, etc</li> <li>Definir cuantos leds hay (200s por tira de 20m) y en que patilla estan (normalmente usamos GPIO2)</li> </ul> <p>Para mandarles ordenes tiene una API Rest a partir del endpoint /json</p> <p>GET -&gt; IP/json =&gt; Devuelve un JSON con 4 campos, 3 de ellos son readonly y solo uno sirve para interactuar:</p> <ul> <li>state -&gt; Unico campo para interactuar</li> <li>effects -&gt; Array de nombres de los efectos</li> <li>palettes -&gt; Array de nombres de las paletas</li> <li>info -&gt; Informaci\u00f3n f\u00edsica de la placa (IP, nivel de se\u00f1al wifi, version firmware, etc)</li> </ul> <p>Se pueden obtener cada uno por separado haciendo una peticion GET</p> <ul> <li>state -&gt; GET IP/json/state</li> <li>effects -&gt; GET IP/json/effects</li> <li>palettes -&gt; GET IP/json/palettes</li> <li>info -&gt; GET IP/json/info</li> </ul>"},{"location":"software/#mandar-cosas-a-las-tiras-de-leds","title":"Mandar cosas a las tiras de leds","text":"<p>Hay que mandar un json con el state que tiene que tener toda la tira</p> <p>POST IP/json/state</p> <p>Ese json es de esta forma</p> <pre><code>type state = {\n    // Para toda la tira -&gt; Enciende true | Apaga false | Toggle \"t\",\n    on: boolean | \"t\",\n    // Para toda la tira -&gt; Brillo de 0 a 255\n    bri: int8,\n    // Para cada segmento -&gt; Array con los estados de cada segment\n    seg: Array&lt;{\n        // El led donde empieza, el mas peque\u00f1o es 0\n        start: int,\n        // El led donde acaba, se puede omitir si se manda len\n        end: int,\n        // Longitud del segmente, se puede omitir si se manda end\n        len: int,\n        // Array con los colores\n        // Tiene 3 elementos: color primario, secundario y terciario\n        // Solo importa el primero\n        // Cada elemento a su vez es un array de 3 elementos -&gt; RGB de 0 a 255\n        col: Array&lt;[red: int8, green: int8, blue: int8]&gt;[3]\n        // Efecto del segmento -&gt; Es el \u00edndice (numero) del array de /json/effects\n        fx: int,\n        // Encender apagar el segmento -&gt; Enciende true | Apaga false | Toggle \"t\",\n        on: boolean | \"t\",\n        // Brillo sel segment -&gt; Brillo de 0 a 255\n        bri: int8,\n    }&gt;\n}\n</code></pre>"},{"location":"software/#un-ejemplo-de-uso-de-curl-para-cambios-de-estado-rapidos","title":"Un ejemplo de uso de curl para cambios de estado rapidos","text":"<p>desde un equipo configurado en la misma wifi que los dispositivos wled, y sabiendo que tienen las IPs 192.168.121.50 y 51: <pre><code>#!/bin/bash\nwhile true\ndo\ncurl -X POST \"http://192.168.121.50/json/state\" -H \"Content-Type: application/json\" --data \"@off.json\"\ncurl -X POST \"http://192.168.121.51/json/state\" -H \"Content-Type: application/json\" --data \"@off.json\"\nsleep 0.1\ncurl -X POST \"http://192.168.121.51/json/state\" -H \"Content-Type: application/json\" --data \"@on.json\"\ncurl -X POST \"http://192.168.121.50/json/state\" -H \"Content-Type: application/json\" --data \"@on.json\"\nsleep 0.1\ndone\n</code></pre></p> <p>los json on y off:</p> <p>on.json: <pre><code>{\"on\":true,\"bri\":255,\"transition\":0,\"ps\":-1,\"pl\":-1,\"nl\":{\"on\":false,\"dur\":60,\"mode\":1,\"tbri\":0,\"rem\":-1},\"udpn\":{\"send\":false,\"recv\":true,\"sgrp\":1,\"rgrp\":1},\"lor\":0,\"mainseg\":0,\"seg\":[{\"id\":0,\"start\":0,\"stop\":200,\"len\":200,\"grp\":1,\"spc\":0,\"of\":0,\"on\":true,\"frz\":false,\"bri\":255,\"cct\":127,\"set\":0,\"col\":[[0,247,255],[0,0,0],[0,0,0]],\"fx\":0,\"sx\":128,\"ix\":128,\"pal\":0,\"c1\":128,\"c2\":128,\"c3\":16,\"sel\":true,\"rev\":false,\"mi\":false,\"o1\":false,\"o2\":false,\"o3\":false,\"si\":0,\"m12\":0}]}\n</code></pre></p> <p>off.json: <pre><code>{\"on\":false,\"bri\":255,\"transition\":0,\"ps\":-1,\"pl\":-1,\"nl\":{\"on\":false,\"dur\":60,\"mode\":1,\"tbri\":0,\"rem\":-1},\"udpn\":{\"send\":false,\"recv\":true,\"sgrp\":1,\"rgrp\":1},\"lor\":0,\"mainseg\":0,\"seg\":[{\"id\":0,\"start\":0,\"stop\":200,\"len\":200,\"grp\":1,\"spc\":0,\"of\":0,\"on\":true,\"frz\":false,\"bri\":255,\"cct\":127,\"set\":0,\"col\":[[0,247,255],[0,0,0],[0,0,0]],\"fx\":0,\"sx\":128,\"ix\":128,\"pal\":0,\"c1\":128,\"c2\":128,\"c3\":16,\"sel\":true,\"rev\":false,\"mi\":false,\"o1\":false,\"o2\":false,\"o3\":false,\"si\":0,\"m12\":0}]}\n</code></pre></p> <p>dentro del propio json se pueden definir los segmentos de la tira, dentro de la entrada: <pre><code>\"seg\":[...]\n</code></pre></p>"},{"location":"software/#usando-ledfx-como-puente-entre-el-audio-y-los-wled","title":"usando ledFX como puente entre el audio y los wled","text":"<p>LedFx es un software que transforma una se\u00f1al de audio en un espect\u00e1culo de luces led en tiempo real (de la documentacion del proyecto). En nuestro caso, es el interfaz entre la voz de las personas que leen los poemas de GF en voz alta, y la estructura interactiva de leds que sirve de escenario para esa lectura. Puede localizar dispositivos ya configurados con wled en la red local, y controlarlos, simplificando la gesti\u00f3n de las tiras de LEDs. Adem\u00e1s, puede controlar dispositivos OSC, por lo que puede ser un elemento interesante para escucha interactiva en shows audiovisuales...</p>"}]}